# =============================================================================
# AXIOM DESIGN ENGINE - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_NAME=axiom-engine
APP_ENV=development  # development | staging | production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR

# -----------------------------------------------------------------------------
# Backend API Configuration
# -----------------------------------------------------------------------------
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=4
API_V1_PREFIX=/api/v1

# CORS Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
FRONTEND_PORT=3000

# -----------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=axiom
POSTGRES_PASSWORD=your-secure-password-here
POSTGRES_DB=axiom_engine

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# Constructed DATABASE_URL (for reference)
# DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Celery broker URL
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=your-256-bit-secret-key-here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password hashing
PASSWORD_HASH_ROUNDS=12

# Rate limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# -----------------------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------------------
STORAGE_BACKEND=local  # local | s3 | minio

# Local storage
LOCAL_STORAGE_PATH=/data/axiom-storage

# S3/MinIO Configuration
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=axiom-assets
S3_REGION=us-east-1
S3_USE_SSL=false

# Signed URL expiration (seconds)
SIGNED_URL_EXPIRATION=3600

# -----------------------------------------------------------------------------
# ComfyUI Configuration
# -----------------------------------------------------------------------------
COMFYUI_HOST=localhost
COMFYUI_PORT=8188
COMFYUI_API_URL=http://localhost:8188

# Workflow paths
COMFYUI_WORKFLOWS_PATH=/app/orchestration/workflows

# -----------------------------------------------------------------------------
# GPU & Execution Configuration
# -----------------------------------------------------------------------------
EXECUTION_MODE=local  # local | cloud | auto

# Local GPU settings
CUDA_VISIBLE_DEVICES=0
GPU_MEMORY_FRACTION=0.9

# Cloud provider settings (when EXECUTION_MODE=cloud or auto)
CLOUD_PROVIDER=runpod  # runpod | vast | lambda
CLOUD_API_KEY=your-cloud-api-key
CLOUD_FALLBACK_ENABLED=true
CLOUD_FALLBACK_THRESHOLD_VRAM=10  # GB

# -----------------------------------------------------------------------------
# Worker Configuration
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=2
WORKER_PREFETCH_MULTIPLIER=1
WORKER_MAX_TASKS_PER_CHILD=100

# Job settings
JOB_TIMEOUT_SECONDS=600
JOB_MAX_RETRIES=3
JOB_RETRY_DELAY_SECONDS=30

# -----------------------------------------------------------------------------
# Asset Generation Limits
# -----------------------------------------------------------------------------
MAX_IMAGE_RESOLUTION=2048
MAX_VIDEO_DURATION_SECONDS=30
MAX_VIDEO_FRAMES=720
MAX_3D_VERTICES=1000000

# File upload limits (bytes)
MAX_UPLOAD_SIZE=104857600  # 100MB

# -----------------------------------------------------------------------------
# Monitoring & Observability
# -----------------------------------------------------------------------------
ENABLE_METRICS=true
METRICS_PORT=9090

# Sentry (optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# -----------------------------------------------------------------------------
# Development Settings
# -----------------------------------------------------------------------------
# Hot reload
BACKEND_RELOAD=true
FRONTEND_TURBOPACK=true

# Test database
TEST_DATABASE_URL=postgresql+asyncpg://axiom:test@localhost:5432/axiom_test
